<!DOCTYPE HTML>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:th="http://www.thymeleaf.org" lang="zh-cn">
<head>
    <meta charset="utf-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <title>图片管理</title>
    <head th:include="/inc/common :: head"></head>
</head>
<body>
<div id="main">
    <form method="post" action="upload" enctype="multipart/form-data">
        <img id="preview" th:width="120px"/>
        <br/>
        <input type="file" name="file" onchange="imgPreview(this)"/>
        <input type="submit" value="upload" />
    </form>
    <img src="file://C:/xjp/Workspaces/project/GitHub/uploadImage/350902-106.jpg" width="200px" height="150px" />
</div>
</body>
<div th:include="/inc/common :: footer"></div>
<script>

    <!-- 图片预览 -->
    function imgPreview(fileDom){
        //判断是否支持FileReader
        if (window.FileReader) {
            var reader = new FileReader();
        } else {
            alert("您的设备不支持图片预览功能，如需该功能请升级您的设备！");
        }
        //获取文件
        var file = fileDom.files[0];
        var imageType = /^image\//;
        //是否是图片
        if (!imageType.test(file.type)) {
            alert("请选择图片！");
            return;
        }
        //读取完成
        reader.onload = function(e) {
            //获取图片dom
            var img = document.getElementById("preview");
            //图片路径设置为读取的图片
            img.src = e.target.result;
        };
        reader.readAsDataURL(file);
    }

    // init
    $(function () {

    });
</script>
</html>